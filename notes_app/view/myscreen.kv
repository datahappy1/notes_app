#:kivy 1.0

<CustomSnackbar>
    MDIconButton:
        pos_hint: {'center_y': .5}
        icon: root.icon
        opposite_colors: True

    MDLabel:
        size_hint_y: None
        height: self.texture_size[1]
        text: root.text
        font_size: root.font_size
        theme_text_color: 'Custom'
        text_color: get_color_from_hex('ffffff')
        shorten: True
        shorten_from: 'right'
        pos_hint: {'center_y': .5}

<ItemDrawer>
    id: section_item
    theme_text_color: "Custom"
    on_release: self.parent.set_color_item(self)

    IconLeftWidget:
        id: icon
        icon: root.icon
        theme_text_color: "Custom"

    IconRightWidget:
        icon: 'trash-can-outline'
        theme_text_color: "Custom"
        on_release: root.delete(section_item)

<MyScreenView>:
    orientation: "vertical"
    nav_toolbar: toolbar
    text_section_view: textInput

    MDToolbar:
        id: toolbar
        elevation: 8
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")],["magnify", lambda x: root.press_icon_search()]]
        right_action_items: [["cog", lambda x: root.menu.open()]]

    ScreenManager:
        MDScreen:
            MDBoxLayout:
                orientation: "vertical"
                text_section_view: textInput

                TextInput:
                    id: textInput
                    multiline: True
                    do_wrap: True

            MDNavigationDrawer:
                id: nav_drawer

                ContentNavigationDrawer:
                    orientation: "vertical"
                    padding: "8dp"
                    spacing: "8dp"

                    ScrollView:
                        DrawerList:
                            id: md_list

                    MDFloatingActionButton:
                        icon: 'plus-thick'
                        on_release: root.press_add_section()
                        elevation_normal: 12
                        pos_hint: {'x': .8, 'y':.05}

<OpenFilePopup>:
    MDBoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        md_bg_color: app.theme_cls.primary_light
        padding: [dp(20),dp(10),dp(20),dp(10)]

        FileChooserListView:
            id: filechooser
            filters: [lambda folder, filename: filename.endswith('.txt')]

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.open_file(filechooser.path, filechooser.selection)

<ShowFileMetadataPopup>
    MDBoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        md_bg_color: app.theme_cls.primary_light
        padding: [dp(20),dp(10),dp(20),dp(10)]

        MDLabel:
            font_style: "H6"
            halign: "center"
            valign: "center"
            markup: True
            text: root.show_file_metadata_label

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

<ShowAppMetadataPopup>
    MDBoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        md_bg_color: app.theme_cls.primary_light
        padding: [dp(20),dp(10),dp(20),dp(10)]

        MDLabel:
            font_style: "H6"
            halign: "center"
            valign: "center"
            markup: True
            text: root.show_app_metadata_label

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

<SearchPopup>
    results_list: scroll

    MDBoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        md_bg_color: app.theme_cls.primary_light
        padding: [dp(20),dp(10),dp(20),dp(10)]

        MDLabel:
            font_style: "H6"
            halign: "center"
            valign: "center"
            text: root.search_results_message

        ScrollableLabel:
            MDList:
                markup: True
                id: scroll

        MDBoxLayout:
            orientation: "horizontal"

            MDLabel:
                text: "Search in all sections"

            MDSwitch:
                id: search_all_sections_switch
                active: root.get_search_switch_state("search_all_sections_switch")
                on_active: root.switch_callback("search_all_sections_switch", self.active)

        MDBoxLayout:
            orientation: "horizontal"

            MDLabel:
                text: "Search case sensitive"

            MDSwitch:
                id: search_case_sensitive_switch
                active: root.get_search_switch_state("search_case_sensitive_switch")
                on_active: root.switch_callback("search_case_sensitive_switch", self.active)

        MDTextField:
            id: search_string_input_value
            text: root.search_string_placeholder
            hint_text: "What string to search for?"
            max_text_length: 10

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Search"
                on_release: root.execute_search(search_string_input_value.text)

<AddSectionPopup>
    MDBoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        md_bg_color: app.theme_cls.primary_light
        padding: [dp(20),dp(10),dp(20),dp(10)]

        MDLabel:
            font_style: "H6"
            halign: "center"
            valign: "center"
            text: root.add_section_result_message

        MDTextField:
            id: section_name_input_value
            hint_text: "What section name to add?"
            max_text_length: 20

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Add"
                on_release: root.execute_add_section(section_name_input_value.text)
